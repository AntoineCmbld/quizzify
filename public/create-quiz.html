<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Quiz</title>
  <style>
    /* Add your styles here */
  </style>
</head>
<body>

  <h2>Create a Quiz</h2>

  <form id="quiz-form" onsubmit="createQuiz(event)">
    <label for="quiz-title">Title:</label>
    <input type="text" id="quiz-title" name="quiz-title" required>
    
    <label for="quiz-description">Description:</label>
    <textarea id="quiz-description" name="quiz-description" rows="4"></textarea>

    <h3>Questions</h3>

    <div id="questions-container">
      <!-- Question fields will be dynamically added here -->
    </div>

    <button type="button" onclick="addQuestion()">Add Question</button>
    <button type="submit">Create Quiz</button>
  </form>

  <script>
    let questionCount = 0;

    function addQuestion() {
      questionCount++;

      const questionsContainer = document.getElementById('questions-container');
      const questionDiv = document.createElement('div');
      questionDiv.innerHTML = `
        <div id="question-line${questionCount}">
          <label for="question${questionCount}">Question ${questionCount}:</label>
          <input type="text" id="question${questionCount}" name="question${questionCount}" required>

          <div id="answers-container${questionCount}">
            ${renderAnswerInput(questionCount, 1)}
            ${renderAnswerInput(questionCount, 2)}
            <button type="button" onclick="addAnswer(${questionCount})">Add Answer</button>
          </div>
          <button type="button" onclick="removeQuestion(${questionCount})">Remove Question</button>
        </div>
      `;
      questionsContainer.appendChild(questionDiv);
      updateQuestionNumbers();
    }

    function renderAnswerInput(questionNumber, answerNumber) {
      return `
        <div>
          <label for="answer${questionNumber}-${answerNumber}">Answer ${answerNumber}:</label>
          <input type="text" id="answer${questionNumber}-${answerNumber}" name="answer${questionNumber}-${answerNumber}" required>
          <button type="button" onclick="removeAnswer(${questionNumber}, ${answerNumber})">Remove Answer</button>
        </div>
      `;
    }

    function removeQuestion(questionNumber) {
      const questionLine = document.getElementById(`question-line${questionNumber}`);
      if (questionLine) {
        questionLine.parentNode.removeChild(questionLine);
        updateQuestionNumbers();
        updateAnswerNumbers();
      }
    }

    function updateQuestionNumbers() {
      const questionLines = document.querySelectorAll('[id^="question-line"]');
      questionLines.forEach((line, index) => {
        const questionNumber = index + 1;
        line.id = `question-line${questionNumber}`;
        line.querySelector('label[for^="question"]').textContent = `Question ${questionNumber}`;
        line.querySelector('input[id^="question"]').id = `question${questionNumber}`;
        line.querySelector('input[name^="question"]').name = `question${questionNumber}`;
        line.querySelector('div[id^="answers-container"]').id = `answers-container${questionNumber}`;
        line.querySelectorAll('label[for^="answer"]').forEach((label, answerIndex) => {
          label.textContent = `Answer ${answerIndex + 1}:`;
        });
        line.querySelectorAll('input[id^="answer"]').forEach((input, answerIndex) => {
          input.id = `answer${questionNumber}-${answerIndex + 1}`;
          input.name = `answer${questionNumber}-${answerIndex + 1}`;
        });
        line.querySelectorAll('button[onclick^="removeAnswer"]').forEach((button, answerIndex) => {
          button.setAttribute('onclick', `removeAnswer(${questionNumber}, ${answerIndex + 1})`);
        });
        line.querySelector('button[onclick^="addAnswer"]').setAttribute('onclick', `addAnswer(${questionNumber})`);
      });
    }

    function addAnswer(questionNumber) {
      const answersContainer = document.getElementById(`answers-container${questionNumber}`);
      const existingAnswerInputs = answersContainer.querySelectorAll('label[for^="answer"]');
      const nextAnswerNumber = existingAnswerInputs.length + 1;
      const newAnswerInput = document.createElement('div');
      newAnswerInput.innerHTML = renderAnswerInput(questionNumber, nextAnswerNumber);
      // Insert the new answer input above the "Add Answer" button
      answersContainer.insertBefore(newAnswerInput, answersContainer.lastElementChild);
      updateAnswerNumbers();
    }

    function removeAnswer(questionNumber, answerNumber) {
  const answerId = `answer${questionNumber}-${answerNumber}`;
  const answerInput = document.getElementById(answerId);

  if (answerInput) {
    const answerContainer = answerInput.parentNode;
    answerContainer.parentNode.removeChild(answerContainer);
    updateAnswerNumbers(); // Update answer numbers after removal
  }
}

    function updateAnswerNumbers() {
      const questionLines = document.querySelectorAll('[id^="question-line"]');
      questionLines.forEach((line, index) => {
        const questionNumber = index + 1;
        line.querySelectorAll('label[for^="answer"]').forEach((label, answerIndex) => {
          label.textContent = `Answer ${answerIndex + 1}:`;
        });
        line.querySelectorAll('input[id^="answer"]').forEach((input, answerIndex) => {
          input.id = `answer${questionNumber}-${answerIndex + 1}`;
          input.name = `answer${questionNumber}-${answerIndex + 1}`;
        });
        line.querySelectorAll('button[onclick^="removeAnswer"]').forEach((button, answerIndex) => {
          button.setAttribute('onclick', `removeAnswer(${questionNumber}, ${answerIndex + 1})`);
        });
      });
    }

    function createQuiz(event) {
      event.preventDefault();

      // Implement quiz creation logic here
      // Gather data from the form and send it to the server
      // This is a basic example and needs further implementation based on your server structure
      alert('Quiz created! Implement the creation logic.');
    }
  </script>

</body>
</html>